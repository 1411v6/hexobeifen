---
title: Linux基本操作学习笔记
date: 2019-12-24 23:55:00
author: 小茗
img: https://www.xmubshw.com/down/xdh/Linuximg.jpg
top: true
cover: true
coverImg: https://www.xmubshw.com/down/xdh/Linuximg.jpg
mathjax: false
summary: Linux基本操作学习笔记
categories: Linux
tags:
  - Linux
---
# Linux

## 运行级别:

|命令模式|
|:-:|
|级别0:系统停机状态,系统默认不能设置为0,否则不能正常启动|
|级别1:单用户工作状态,root权限用于系统维护,禁止远程登录|
|级别2:多用户状态(没有NFS)|
|级别3:完全的多用户状态,(有NFS),登录后进入控制台命令行模式|
|级别4:系统未使用,保留|
|级别5:X11控制台,登陆后进入图形GUI模式|
|级别6:系统正常关闭并重启,默认不能设为6,否则不能正常启动|

***

## 登录方式:

|登录方式|
|:-:|
|①:命令行登录|
|②:ssh登录|
|③:图形界面登录|

***

### 切换:

|切换方式|
|:-:|
|Ctrl+Alt+F1-F6切换界面|
|Ctrl+Alt+F1返回图形界面|

***

## 常用操作:

### 安装目录:

软件安装目录一般为:
```
/usr/local/新建一个文件夹
```

相对路径:从当前路径,不写根;
例:
```
cd usr/
```

绝对路径:从根开始;
例:
```
cd /usr/
```

***

### 用户:

|超级用户|普通用户|
|:-:|:-:|
|#|$|

***

### 关机重启正确步骤:

步骤①:先执行数据同步
```
sync
```

步骤②:关机正确命令
```
shutdown -h now
```

步骤③:重启正确命令
```
shutdown -r now
```

***

### 硬链接与软链接:

#### 硬链接(不常用):

```
源文件和硬链接拥有相同的Inode号和Black块,可以看成同一个文件,如果修改任意一个文件,另一个内容都可以改变;删除任意一个文件,另一个都可以正常使用,除非两个都删除.
```
```
缺点:硬链接不能跨分区,不能链接目录.
```
```
ln /root/abc /tmp/abc-h
```

#### 软链接(常用):

```
软链接有自己独立的Inode号和Block块,但是Block块不记录,只写入源文件的文件名和Inode号,不论源文件多大,软链接大小不变.
软链接是最大权限777,但是访问还是要受源文件权限限制;
修改任意一个文件,另一个都可以改变;
删除软链接,源文件不变;但是删除源文件,软链接无法访问;
软链接可以跨分区,可以链接目录,特征明显.
```

```
ln -s 源文件 目标文件(文件名都必须写绝对路径)
```

***

### 权限:

|文件权限|
|:-:|
|所有者|
|所属组|
|其他人|

***

|文件权限|
|:-:|
|'r':读,数字代表为4|
|'w':写,数字代表为2|
|'x':执行,数字代表为1|

***

|常用文件权限|
|:-:|
|'644':代表所有者是读,写权限,而所属组和其他人是只读权限|
|'755':代表所有者是读,写,执行权限,所属组和其他人是读和执行权限(最常用权限)|
|'777':最大权限,在实际的生产服务器中,要尽力避免赋予这样的权限|

***

```
注:目录最大权限不是执行权限,而是写权限,因为目录不能被执行,文件的最大权限是执行权限.
```

***

|本地访问|网络访问|
|:-:|:-:|
|本地权限生效|网络权限和本地权限同时生效|

***

#### 权限第一位代表方式:

|权限第一位表示|权限第一位表示|
|:-:|:-:|
|'-':普通文件|'b':块设备文件,存储设备文件,如硬盘,光盘,U盘等|
|'c':字符设备文件,输入设备文件,如鼠标,键盘等|'d':目录文件|
|'p':管道符文件|'c':软链接文件|

***

## 常用命令:

```
ll -ha 长格式显示所有文件
ll -hd 查看目录本身
ll -hi 查看Inode节点号

cd ~ 进入当前用户家目录
cd - 进入上次目录
cd .. 进入上一级目录
cd . 进入当前目录

rm -rf 文件名或目录名 递归强制删除文件或目录
rm -rf /目录/* 删除目录里的任意内容

tree 目录树
安装tree命令:sudo apt-get install tree

touch 文件名 创建文件
注:如果文件存在,则修改文件时间为当前时间,如果文件不存在,则创建这个文件

touch -d "20xx-xx-xx xx:xx:xx" 文件名 修改文件时间

cat 文件名 查看文件内容(从头到尾,有极限)
more 文件名 查看文件内容(按百分比,可查看全部)
head -行数 文件名 查看文件前n行
tail -行数 文件名 查看文件后n行
监听文件实时改动:tail -f 文件名

cp 文件名 目录 复制文件到目录
例:
cp abc /tmp/ 把abc文件复制到tmp目录里

cp -r 123 /tmp 把123这个目录复制到tmp目录里
注:'-r'代表目录,此时复制的文件跟源文件不一样(包括时间,Inode节点号)

cp -a abc /tmp/bcd 把abc复制到tmp目录里并改名为bcd
注:这种方法复制的文件跟源文件一样(包括时间,Inode节点号)

mv 123 /tmp/ 把123文件剪切进tmp目录里
注:mv不用加参数

别名:alias
alias ser='service network restart' 命名快捷命令'ser',并链接到'service network restart'命令上,此时命令为临时生效,重启后失效

注:如需永久生效,可把上方命令加进root目录下的'.bashrc'文件内
注:root里,只对当前用户生效,如需所有用户生效,可把上方命令放入etc目录下文件内

df -h 查询分区使用情况

chmod 权限 文件名
例:chmod 755 abc

useradd 用户名 建立新用户
注:建立完用户后,应立即使用'passwd'命令修改新用户密码.否则用户不能登录

usermod -l 新用户名 旧用户名 修改用户名

groupadd 组名 新建用户组

groupmod -n 新组名 旧组名 修改组名

chown 所有者 文件名 更改文件所有者
chown 所有者:所属组 文件名 既更改文件所有者,又更改文件所属组

把用户加进另一个组(常用):
usermod -a -G 组名 用户名

id -gn 显示组id
id 显示id

搜索:
1.locate
	优点:占用资源少,按数据库查找
	updatedb 此命令强制更新数据库(在locate命令搜索不到的时候用)
例:locate abc

2.find
	此命令通过查找全盘来进行
例:find / -name abc 从根目录开始查找abc文件

3.grep
	此命令按字符串进行查找
例:grep "123" abc 从abc里搜索带有123字符的数据
```

***

### 通配符:

|通配符|
|:-:|
|'*':任意内容|
|'?':任意一个内容(一定要有一个才可以)|
|'[]':中括号内任意一个内容|

***

### 正则表达式:

```
'*':前一个字符重复任意多次;

'?':前一个字符重复0次或1次;
例:egrep "a1?2" abc 在abc文件中查找a 1个1,a 没有1;

'[]':中括号内任意一个内容;

'^':行首;
例:egrep "^123" abc 在abc文件中查找123开头的字符;

'$':行尾;
例:egrep "123$" abc 在abc文件中查找123结尾的字符;
```

***

### 管道符:

```
'|'
例:ll /etc/ | grep abc 从etc目录下搜索abc所有

例:netstat -tuln | grep 80 查看运行端口80的服务
```

***

### 压缩:

```
tar -zcvf 文件名.tar.gz 需要压缩文件的路径
```

***

### 解压:

```
tar -zxvf 压缩包名
```

#### 解压到指定位置:

```
tar -zxvf 压缩包名 -C 解压路径
```

#### 只查看不解压:

```
tar -ztvf 压缩包名
注:'t'为测试意思
```

***

### 挂载:

```
fdisk -l 查看分区列表
mount 查询挂载了哪些设备
mount 设备名 挂载点
例:mount /dev/sdc1/ /mnt/usb/
把dev目录下的sdc1硬件挂载进mnt目录下的usb挂载点内
```

#### 卸载挂载

```
umount /mnt/usb/
```
***